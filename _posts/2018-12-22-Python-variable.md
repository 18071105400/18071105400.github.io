---
layout: post
title: "Python-14-variable"
categories: Python
tags: Python variable
author: worren li &emsp;

---

* centent
{:toc}

# Python-variable  
## 全局变量和局部变量

* 局部变量
    1. 定义在函数内部的变量称为局部变量(函数的形参也是局部变量)
    2. 局部变量只能在函数内部使用
    3. 局部变量在函数调用时才能创建，在函数调用之后会自动销毁

* 全局变量
    1. 定义在函数外部,模块内部的变量称为全局变量
    2. 全局变量所有的函数都可以直接访问(但函数内部不能将其直接赋值)
* 说明:
   函数内部赋值语句不会对全局变量造成影响
   
## globals() 函数 和 locals 函数  
   1. globals()  返回当前全局作用域内变量的字典  
   2. locals()  返回当前局部作用域内变量的字典  

## 函数变量  
   1. 函数名是变量,它在创建函数时绑定一个函数  

   2. 一个函数可以作用另一个函数的实参传递，可以把一个函数给另一个函数,另一个函数的形参变量将绑定实参函数   

```
看懂如下代码,判断结果
  def myinput(fn):
      L = [1, 3, 9, 5, 7]
      return fn(L)

  print(myinput(max))  # 9
  print(myinput(min))  # 1
  print(myinput(sum))  # 25
```
   3. 函数可以作用另一个函数的返回值  

## 函数的嵌套定义   
   函数嵌套定义是指一个函数里用def语句来创建其它函数的情况  

## python的作用域  
   * 作用域也叫名字空间，是访问变量时查找变量的名范围空间  

   * python中的四个作用域 LEGB  

```
   作用域             英文解释          英文缩写
局部作用域          Local(function)          L
外部嵌套函数作用域  Enclosing Fucntion local  E
函数定义所在模块(文件)的作用域  Global(module)  G
Python内建模块的作用域     Builtin(python)    B
```

* 变量名的查找规则  

```
   L --->  E  ---> G  ---->  B
```

* 注:  
   在默认的情况下,变量名赋值会创建或改变当前作用域内变量的绑定关系  

### global 语句
1. 作用:
    a. 告诉解释执行器,global语句声明的一个或多个变量,这些变量的作用域为模块级的作用域,也称作全局变量
    b. 全局声明(global) 将赋值语句的变量映射到模块文件内部的作用域
2. 语法:
    global 变量名1, 变量名2, ....

3. 说明:
    a. 全局变量如果要在函数内部被赋值,则必须经过全局声明(否则会被认为是局部变量)
    b. 全局变量在函数内部不经过声明就可以直接访问(取值)
    c. 不能先创建局部变量,再用global声明为全局变量,此种做法不符合规则
    d. global变量列表里的变量名不能出现在函数的形参列表里


### nonlocal 语句
1. 作用:
    告诉解释器, nonlocal声明的变量不是局部变量,也不是全局变量,而是外部嵌套函数内的变量
2. 语法:
    nonlocal 变量名1, 变量名2, ....

3. 说明:
    a. nonlocal 语句只能在被嵌套函数内部进行使用
    b. 对nonlocal变量进行赋值将对外部嵌套函数作用域内的变量进行操作
    c. 当有两层或两层以上函数嵌套时,访问nonlocal变量只对最近的一层变量进行操作
    d. nonlocal 语句的变量列表里的变量名不能出现在此函数的形参列表中


## lambda 表达式(又称匿名函数)
1. 作用:
    创建一个匿名函数对象，同def 类似,但不提供函数名
2. 语法:
    lambda [函数形参列表]: 表达式

3. 说明:
    a. lambda 表达式创建的函数只能包含一条表达式
    b. lambda 比函数简单,且可以随时创建和销毁,有利于降低程序的偶合度
    

### eval函数和exec() 函数  
1. eval(source, global=None, local=None), 把一个字符串source 当成一个表达式来执行,返回表达式执行后的结果
2. exec(source, global=None, local=None)  把一个字符串source当成程序来执行

