---
layout: post
title: "Python-17-module"
categories: Python
tags: Python Module
author: worren li &emsp;

---

* centent
{:toc}

# Python -Module
## 自定义模块并导入
1. 要求:
   *  模块文件名后缀名必须以 .py 结尾  

   * 模块文件名必须是合法的标识符  

   * 避免名称和内建模块名冲突  

2. 导入方式:  

   * import 语句  

   * from import 语句  

   * from import * 语句   

3. import 语句查找模块文件的路径顺序  
* import 模块名   #  去哪儿找这个   "模块名.py"  

1. 搜索内建模块  

2. 搜索程序运行时的路径(当前路径)  

3. sys.path 提供的路径  
   * sys.path 是一个列表,内部存入的都是模块的搜索路径  
   * >>> import sys  
   * >>> print(sys.path)  

  

## 安装 第三方模块或包  
   * pip3 install 模块名   
1. 让import语句能找到自己的模块  
   * 把自己的写的模块放到sys.path中的某个文件夹内  
   * 修改sys.path列表,在内部添加一个文件夹的字符串  
   *(注:此做法只对当前程序起作用)  
```
如:
import sys
sys.path.append('/home/tarena')
```

## 模块化编程优点:
1. 有利于多人合作开发  
2. 使代码更加易于维护  
3. 提高代码的复用率  
4. 有利于解决变量名冲突问题(模块内的全局变量的作用域为模块内全局)  

### 模块的加载过程  
1. 在模块导入时,模块内的所有语句都会执行  
2. 如果一个模块已经导入,则再次导入时不会重新执行模块内的语句  

### 模块被导入和执行的过程  
1. 先搜索相关路径找到 模块名.py  
2. 判断是否有此模块对应的pyc文件.如果.pyc文件比.py文件新则直接加载.pyc文件  
3. 如果.pyc文件比.py文件旧,则用模块名.py 生成 .pyc文件,并加载执行  

### 模块的编译   
```
    编译               解释执行
mymod.py ----->  mymod.pyc --------> python3
```

### 模块的属性
```
  __doc__ 属性
```
1. 用于绑定模块的文档字符串  
2. 模块的文档字符串用于help(模块) 函数提供帮助信息  

```
  __file__属性
```
*  用于绑定模块的文件路径名  

```
  __name__属性
```
1. __name__属性用来记录模块自身的名字
2. 作用:  
   * 记录模块名  
   *  用来判断是否为主模块  

3. 说明:  
   * 当模块作为主模块(也就是第一个运行的模块)运行时,   __name__属性 绑定 '__main__'  
当此模块不是主模块时,__name__属性 绑定模块名
```
如:
mymod.py 的模块名为 'mymod'
```
### 模块的__all__列表
1. 作用:
当用from xxx import *语句导入时,只导入__all__列表内的属性
2. 说明:
   * __all__列表是一个用来存放可导出属性的字符串列表  

3. 模块的隐藏属性
   * 模块中以'_' 开头的属性,在用 from xxx import \*导入时将不被导入,通常称这些属性为隐藏属性  

4. 随机模块 random  
    * 作用:用于模拟或生成随机输出的模块  
    * 文档参见: python_base_docs_html/随机模块random.py  

  

### 包(模块包)  package

   * 包是将模块以文件夹的组织形式进行分组管理的方法  
1. 作用:  
* 将一系列模块进行分类管理,有利于防止命名冲突  
* 可以在需要时加载一个或部分模块,而不是全部模块  

### 包的导入  
* 同模块的导入规则  
```
  import 包名 [as 包别名]

  import 包名.模块名 [as 模块新名]

  import 包名.子包名.模块名 [as 模块新名]

  from 包名 import 模块名 [as 模块新名]

  from 包名.子包名 import 模块名 [as 模块新名]

  from 包名.子包名.模块名 import 属性名 [as 属性新名]

  from 包名 import *

  from 包名.模块名 import *
```

#### __init__.py 文件  

* __init__.py 是常规包内必须存在的文件  
* __init__.py 会在包加载时被自动调用  

1. 作用:  
    * 编写此包的内容  
    * 在包内填写包的文档字符串  
    * 在__init__.py 文件内可以加载此包所依懒的一些其它模块  

  

#### __init__.py 内的 __all__列表  
1. 作用:  
* 用来记录此包中有哪儿些包或模块需要导入  
* 当用from 包 import *语句导入模块时,只查找__all__中所有的模块或子包  

2. 说明:  
* __all__列表 只在from xxx import * 起作用  

#### import 语句搜索包的路径的顺序:  
* 搜索程序运行时的路径(当前工作目录)  

1. sys.path提供的路径  

* 包的相对导入  
1. 包的相对导入是指包内模块的相互导入  
2. 语法: 
    * from 相对路径包或模块 import 属性或模块名  
或
    * from 相对路径包或模块 import *

* 相对路径:  
1. 在from import语句和 from imoprt *语句中可以使用相对路径  
```
.代表当前目录
.. 代表上一级目录
...代表上两级目录
.... 以此类推
注: 相对导入时不能超出包的外部
```